<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>English Grammar Exam</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f4f4f4;
            color: #333;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background-color: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        h1, h2, h3 {
            color: #0056b3;
            text-align: center;
        }
        .instructions, .results, .question-section {
            margin-bottom: 20px;
        }
        .instructions ul {
            list-style-type: none;
            padding: 0;
        }
        .instructions ul li {
            margin-bottom: 5px;
        }
        .start-btn-container {
            text-align: center;
            margin-top: 30px;
        }
        .btn {
            background-color: #007bff;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            margin: 5px;
        }
        .btn:hover {
            background-color: #0056b3;
        }
        .question-nav {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }
        .options label {
            display: block;
            margin: 8px 0;
            cursor: pointer;
        }
        .options input[type="radio"] {
            margin-right: 10px;
        }
        .timer {
            font-size: 1.2em;
            font-weight: bold;
            text-align: right;
            margin-bottom: 10px;
            color: #d9534f;
        }
        .results-summary {
            text-align: center;
            margin-bottom: 20px;
        }
        .results-summary p {
            font-size: 1.1em;
            margin: 5px 0;
        }
        .answer-key-item {
            border: 1px solid #eee;
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 5px;
        }
        .answer-key-item p {
            margin: 5px 0;
        }
        .correct-answer {
            color: blue;
            font-weight: bold;
        }
        .incorrect-answer {
            color: red;
            font-weight: bold;
        }
        .user-answer {
            font-style: italic;
        }
        .not-attempted {
            color: #777;
        }
        .hidden {
            display: none;
        }
    </style>
</head>
<body>

    <div class="container">
        <div id="instructions-page">
            <h1>English Grammar Exam</h1>
            <div class="instructions">
                <h2>Exam Details:</h2>
                <ul>
                    <li><strong>Total Questions:</strong> 20</li>
                    <li><strong>Time Limit:</strong> 9 minutes</li>
                    <li><strong>Marking Scheme:</strong></li>
                    <ul>
                        <li>1 mark for each correct answer.</li>
                        <li>0.25 marks deducted for each incorrect answer.</li>
                        <li>No negative marking for unanswered questions.</li>
                    </ul>
                    <li><strong>Sections:</strong></li>
                    <ul>
                        <li>Part 1: Identify the Type of Adverb (10 Questions)</li>
                        <li>Part 2: Fill in the Blanks with Adverbs (5 Questions)</li>
                        <li>Part 3: Active and Passive Voice (5 Questions)</li>
                    </ul>
                </ul>
            </div>
            <div class="start-btn-container">
                <button class="btn" id="start-exam-btn">Start Your Exam</button>
            </div>
        </div>

        <div id="exam-page" class="hidden">
            <div class="timer" id="timer">Time Left: 09:00</div>
            <div class="question-section">
                <h3 id="question-number">Question 1:</h3>
                <p id="question-text"></p>
                <div class="options" id="question-options">
                    </div>
            </div>
            <div class="question-nav">
                <button class="btn" id="skip-btn">Skip</button>
                <button class="btn" id="next-btn">Next</button>
                <button class="btn hidden" id="submit-exam-btn">Submit Exam</button>
            </div>
        </div>

        <div id="results-page" class="hidden">
            <h1>Exam Results</h1>
            <div class="results-summary">
                <p><strong>Total Marks:</strong> <span id="total-marks"></span></p>
                <p><strong>Correct Answers:</strong> <span id="correct-count"></span></p>
                <p><strong>Incorrect Answers:</strong> <span id="incorrect-count"></span></p>
                <p><strong>Not Attempted:</strong> <span id="not-attempted-count"></span></p>
            </div>
            <h2>Check Your Answers</h2>
            <div id="answer-key">
                </div>
            <div class="start-btn-container">
                 <button class="btn" onclick="location.reload()">Take Exam Again</button>
            </div>
        </div>
    </div>


    <script>
        const questions = [
            // Part 1: Identify the Type of Adverb (10 Questions)
            {
                id: 1,
                text: "She **always** finishes her homework on time.",
                options: ["Adverb of Manner", "Adverb of Place", "Adverb of Time", "Adverb of Frequency"],
                correct: "Adverb of Frequency"
            },
            {
                id: 2,
                text: "The cat slept **soundly** on the rug.",
                options: ["Adverb of Manner", "Adverb of Place", "Adverb of Time", "Adverb of Degree"],
                correct: "Adverb of Manner"
            },
            {
                id: 3,
                text: "My grandmother lives **there**.",
                options: ["Adverb of Manner", "Adverb of Place", "Adverb of Time", "Adverb of Frequency"],
                correct: "Adverb of Place"
            },
            {
                id: 4,
                text: "We will meet **tomorrow** morning.",
                options: ["Adverb of Manner", "Adverb of Place", "Adverb of Time", "Adverb of Degree"],
                correct: "Adverb of Time"
            },
            {
                id: 5,
                text: "He **hardly** ever complains about anything.",
                options: ["Adverb of Manner", "Adverb of Place", "Adverb of Time", "Adverb of Frequency"],
                correct: "Adverb of Frequency"
            },
            {
                id: 6,
                text: "The tea was **too** hot to drink.",
                options: ["Adverb of Manner", "Adverb of Place", "Adverb of Time", "Adverb of Degree"],
                correct: "Adverb of Degree"
            },
            {
                id: 7,
                text: "Please come **inside**. It's cold out.",
                options: ["Adverb of Manner", "Adverb of Place", "Adverb of Time", "Adverb of Frequency"],
                correct: "Adverb of Place"
            },
            {
                id: 8,
                text: "She writes **neatly** in her notebook.",
                options: ["Adverb of Manner", "Adverb of Place", "Adverb of Time", "Adverb of Degree"],
                correct: "Adverb of Manner"
            },
            {
                id: 9,
                text: "They visit their relatives **annually**.",
                options: ["Adverb of Manner", "Adverb of Place", "Adverb of Time", "Adverb of Frequency"],
                correct: "Adverb of Frequency"
            },
            {
                id: 10,
                text: "I am feeling **much** better today.",
                options: ["Adverb of Manner", "Adverb of Place", "Adverb of Time", "Adverb of Degree"],
                correct: "Adverb of Degree"
            },
            // Part 2: Fill in the Blanks with Adverbs (5 Questions)
            {
                id: 11,
                text: "She walks __________ to avoid slipping on the ice.",
                options: ["quickly", "carefully", "rarely", "downstairs"],
                correct: "carefully"
            },
            {
                id: 12,
                text: "The bird flew __________ towards the nest.",
                options: ["happily", "yesterday", "upwards", "often"],
                correct: "upwards"
            },
            {
                id: 13,
                text: "We __________ go to the beach in the summer.",
                options: ["gently", "loudly", "usually", "completely"],
                correct: "usually"
            },
            {
                id: 14,
                text: "The baby slept __________ in its crib.",
                options: ["outside", "soundly", "soon", "almost"],
                correct: "soundly"
            },
            {
                id: 15,
                text: "He arrived __________ for the meeting.",
                options: ["daily", "quickly", "early", "enough"],
                correct: "early"
            },
            // Part 3: Active and Passive Voice (5 Questions)
            {
                id: 16,
                text: "My mother bakes delicious cakes.",
                options: ["Delicious cakes are baked by my mother.", "Delicious cakes were baked by my mother.", "Delicious cakes are being baked by my mother.", "Delicious cakes have been baked by my mother."],
                correct: "Delicious cakes are baked by my mother."
            },
            {
                id: 17,
                text: "The students are reading books.",
                options: ["Books are read by the students.", "Books were being read by the students.", "Books are being read by the students.", "Books have been read by the students."],
                correct: "Books are being read by the students."
            },
            {
                id: 18,
                text: "John painted the house last year.",
                options: ["The house is painted by John last year.", "The house was painted by John last year.", "The house is being painted by John last year.", "The house has been painted by John last year."],
                correct: "The house was painted by John last year."
            },
            {
                id: 19,
                text: "The gardener was watering the plants.",
                options: ["The plants are being watered by the gardener.", "The plants were watered by the gardener.", "The plants were being watered by the gardener.", "The plants have been watered by the gardener."],
                correct: "The plants were being watered by the gardener."
            },
            {
                id: 20,
                text: "She often helps her neighbours.",
                options: ["Her neighbours are often helped by her.", "Her neighbours were often helped by her.", "Her neighbours are often being helped by her.", "Her neighbours often help her."],
                correct: "Her neighbours are often helped by her."
            }
        ];

        let currentQuestionIndex = 0;
        let userAnswers = new Array(questions.length).fill(null);
        let timerInterval;
        const examDuration = 9 * 60; // 9 minutes in seconds
        let timeLeft = examDuration;

        const instructionsPage = document.getElementById('instructions-page');
        const examPage = document.getElementById('exam-page');
        const resultsPage = document.getElementById('results-page');
        const startExamBtn = document.getElementById('start-exam-btn');
        const nextBtn = document.getElementById('next-btn');
        const skipBtn = document.getElementById('skip-btn');
        const submitExamBtn = document.getElementById('submit-exam-btn');

        const questionNumberElem = document.getElementById('question-number');
        const questionTextElem = document.getElementById('question-text');
        const questionOptionsElem = document.getElementById('question-options');
        const timerElem = document.getElementById('timer');

        const totalMarksElem = document.getElementById('total-marks');
        const correctCountElem = document.getElementById('correct-count');
        const incorrectCountElem = document.getElementById('incorrect-count');
        const notAttemptedCountElem = document.getElementById('not-attempted-count');
        const answerKeyElem = document.getElementById('answer-key');


        startExamBtn.addEventListener('click', startExam);
        nextBtn.addEventListener('click', goToNextQuestion);
        skipBtn.addEventListener('click', skipQuestion);
        submitExamBtn.addEventListener('click', submitExam);

        function startExam() {
            instructionsPage.classList.add('hidden');
            examPage.classList.remove('hidden');
            loadQuestion();
            startTimer();
        }

        function startTimer() {
            timerInterval = setInterval(() => {
                timeLeft--;
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                timerElem.textContent = `Time Left: ${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;

                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    submitExam();
                }
            }, 1000);
        }

        function loadQuestion() {
            const question = questions[currentQuestionIndex];
            questionNumberElem.textContent = `Question ${currentQuestionIndex + 1}:`;
            questionTextElem.innerHTML = question.text; // Use innerHTML for bold tags

            questionOptionsElem.innerHTML = '';
            question.options.forEach((option, index) => {
                const label = document.createElement('label');
                const input = document.createElement('input');
                input.type = 'radio';
                input.name = 'question' + question.id;
                input.value = option;
                input.checked = (userAnswers[currentQuestionIndex] === option); // Pre-select if already answered
                input.addEventListener('change', (event) => {
                    userAnswers[currentQuestionIndex] = event.target.value;
                });
                label.appendChild(input);
                label.appendChild(document.createTextNode(option));
                questionOptionsElem.appendChild(label);
            });

            // Show submit button on last question
            if (currentQuestionIndex === questions.length - 1) {
                nextBtn.classList.add('hidden');
                skipBtn.classList.add('hidden');
                submitExamBtn.classList.remove('hidden');
            } else {
                nextBtn.classList.remove('hidden');
                skipBtn.classList.remove('hidden');
                submitExamBtn.classList.add('hidden');
            }
        }

        function goToNextQuestion() {
            if (currentQuestionIndex < questions.length - 1) {
                currentQuestionIndex++;
                loadQuestion();
            }
        }

        function skipQuestion() {
            // Simply move to the next question without saving an answer
            goToNextQuestion();
        }

        function submitExam() {
            clearInterval(timerInterval);
            examPage.classList.add('hidden');
            resultsPage.classList.remove('hidden');
            const results = calculateResults(); // Calculate and get data
            sendResultsToFormSubmit(results); // Send results in background
        }

        function calculateResults() {
            let correctCount = 0;
            let incorrectCount = 0;
            let notAttempted = 0;
            let totalMarks = 0;

            answerKeyElem.innerHTML = ''; // Clear previous answer key

            questions.forEach((q, index) => {
                const userAnswer = userAnswers[index];
                const questionDiv = document.createElement('div');
                questionDiv.classList.add('answer-key-item');

                let resultClass = '';
                let userAnswerDisplay = 'Not Attempted';

                if (userAnswer === q.correct) {
                    correctCount++;
                    totalMarks += 1;
                    resultClass = 'correct-answer';
                    userAnswerDisplay = userAnswer;
                } else if (userAnswer !== null) {
                    incorrectCount++;
                    totalMarks -= 0.25;
                    resultClass = 'incorrect-answer';
                    userAnswerDisplay = userAnswer;
                } else {
                    notAttempted++;
                    resultClass = 'not-attempted';
                }

                questionDiv.innerHTML = `
                    <p><strong>Question ${q.id}:</strong> ${q.text}</p>
                    <p><strong>Your Answer:</strong> <span class="user-answer ${userAnswer === null ? 'not-attempted' : resultClass}">${userAnswerDisplay}</span></p>
                    <p><strong>Correct Answer:</strong> <span class="correct-answer">${q.correct}</span></p>
                `;
                answerKeyElem.appendChild(questionDiv);
            });

            totalMarksElem.textContent = totalMarks.toFixed(2);
            correctCountElem.textContent = correctCount;
            incorrectCountElem.textContent = incorrectCount;
            notAttemptedCountElem.textContent = notAttempted;
            
            // Return the results data to be sent
            return {
                'Total Marks': totalMarks.toFixed(2),
                'Correct Answers': correctCount,
                'Incorrect Answers': incorrectCount,
                'Not Attempted': notAttempted
            };
        }

        function sendResultsToFormSubmit(resultsData) {
            const formData = new FormData();
            
            // Set your email address here
            const formSubmitUrl = 'https://formsubmit.co/gaurijha1511gmail.com'; 

            // Add required formsubmit.co fields and your results data
            formData.append('_subject', 'English Grammar Exam Results');

            for (const key in resultsData) {
                formData.append(key, resultsData[key]);
            }
            
            // Use fetch to send the data without redirecting the user
            fetch(formSubmitUrl, {
                method: 'POST',
                body: formData
            })
            .then(response => {
                // Email sent successfully (or attempted). No redirect or message shown to user.
            })
            .catch(error => {
                // Handle error if fetch fails (e.g., no internet)
            });
        }

    </script>
</body>
</html>
